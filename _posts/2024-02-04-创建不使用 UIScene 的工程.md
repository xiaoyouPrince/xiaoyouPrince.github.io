---
title: åˆ›å»ºä¸ä½¿ç”¨ UIScene çš„å·¥ç¨‹
auther: xiaoyouPrince
date: 2024-02-04 16:53:46 +0800
categories: Xcode é¡¹ç›®
tags: uiscene yyuikit
layout: post
---

# åˆ›å»ºä¸ä½¿ç”¨ UIScene çš„å·¥ç¨‹

> æœ¬æ–‡è®°å½•äº†åˆ›å»ºä¸ä½¿ç”¨ UIScene çš„å·¥ç¨‹çš„ä¸¤ç§æ–¹æ³•
> 1. æš´åŠ›åˆ é™¤æ³•, ç›´æ¥åˆ é™¤ UIScene ç›¸å…³é…ç½®,ä¸åšæ”¯æŒ
> 2. ç‰ˆæœ¬é€‚é…æ³•, é’ˆå¯¹ iOS 12 ä»¥ä¸‹ç³»ç»Ÿä½¿ç”¨ AppDelegete, iOS 13 + ä½¿ç”¨ UIScene
{: .prompt-info }

UIScene å·²ç»æ˜¯ Xcode é»˜è®¤åˆ›å»ºé¡¹ç›®çš„é»˜è®¤é…ç½®äº†, å¹¶ä¸”ç°åœ¨å¼€å‘æ–°é¡¹ç›®ä¹ŸåŸºæœ¬éƒ½æ”¯æŒ iOS 13+ äº†,  ä½†æ˜¯ä»æœ‰äº›è€æ—§é¡¹ç›®ä¾ç„¶éœ€è¦é€‚é… iOS 13 ä»¥ä¸‹çš„ç‰ˆæœ¬. æ°é€¢æˆ‘ä»Šå¤©é‡æ„ [YYUIKit Demo](https://github.com/xiaoyouPrince/XYUIKit) å·¥ç¨‹çš„æ—¶å€™éœ€è¦é€‚é…è¾ƒä½çš„ç‰ˆæœ¬, é‚è®°å½•ä¸€ä¸‹.

[YYUIKit](https://github.com/xiaoyouPrince/XYUIKit) æ˜¯æˆ‘å¼€æºçš„ä¸€å¥— UI å¼€å‘å·¥å…·åŒ…, ä¸»è¦åŒ…å« Foundation æ‹“å±•å’Œå¸¸ç”¨ UIKit æ§ä»¶æ‹“å±•å’Œä¸€äº›é«˜é¢‘è‡ªå®šä¹‰ç»„ä»¶å°è£…, æ—¨åœ¨æé«˜å¼€å‘æ•ˆç‡, æ¬¢è¿æœ‰ç¼˜äººä½¿ç”¨, å¥½ç”¨çš„è¯ä¹Ÿæ¬¢è¿ç‚¹èµğŸ’ª

## æš´åŠ›åˆ é™¤ UIScene é…ç½®, ç›´æ¥ä¸æ”¯æŒ UIScene

æ ¸å¿ƒå°±æ˜¯åˆ é™¤ UIScene é…ç½®, æ‰€è§ä¸€ä¸ªä¸ç•™. æ­¥éª¤å¦‚ä¸‹:

- åˆ›å»ºæ–° Xcode é¡¹ç›®
- æ‰¾åˆ°é»˜è®¤åˆ›å»ºçš„ `SceneDelegate.swift` æ–‡ä»¶, ç›´æ¥åˆ é™¤
- æ‰“å¼€ `AppDelegate.swift` æ–‡ä»¶, åˆ é™¤ UIScene å†…å®¹, æ‰‹åŠ¨åˆ›å»º UIWindow
- æ‰“å¼€ `Info.plist`, åˆ é™¤ `UIApplicationSceneManifest` æ•´ä¸ªé…ç½®é¡¹


```swift
//  AppDelegate.swift

import UIKit

@main
class AppDelegate: UIResponder, UIApplicationDelegate {

    // éœ€è¦æ‰‹åŠ¨åˆ›å»º window
    var window: UIWindow?

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        
        // é…ç½® window.rootVC
        window?.frame = UIScreen.main.bounds;
        window?.backgroundColor = UIColor.white
        window?.makeKeyAndVisible()
        window?.rootViewController = UIStoryboard(name: "Main", bundle: nil).instantiateInitialViewController()
        
        return true
    }

}
```


## ç‰ˆæœ¬é€‚é…æ³•, åŒºåˆ†ç‰ˆæœ¬ä» iOS 13 å¼€å§‹é€‚é…

æ‰¾åˆ°ä»£ç ä¸­ UIScene ç›¸å…³ API, å•ç‹¬æŠ½å–å‡ºæ¥, å¹¶å°†å…¶è®¾ç½®ä¸º `@available(iOS 13.0, *)` å³å¯. å…·ä½“æ­¥éª¤å¦‚ä¸‹:

- åˆ›å»ºæ–° Xcode é¡¹ç›®
- æ‰“å¼€é»˜è®¤åˆ›å»ºçš„ `SceneDelegate.swift` æ–‡ä»¶, å¹¶åœ¨ class å£°æ˜åœ°æ–¹æ·»åŠ  `@available(iOS 13.0, *)`

``` swift
//  SceneDelegate.swift
import UIKit

@available(iOS 13.0, *)
class SceneDelegate: UIResponder, UIWindowSceneDelegate { ... }
```

- æ‰“å¼€ `AppDelegate.swift` æ–‡ä»¶, å¹¶å‰¥ç¦» UIScene

```swift
//  AppDelegate.swift

import UIKit

@main
class AppDelegate: UIResponder, UIApplicationDelegate {

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        return true
    }   
}


@available(iOS 13.0, *)
extension AppDelegate {
    // MARK: UISceneSession Lifecycle
    
    func application(_ application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions) -> UISceneConfiguration { 
    }
    
    func application(_ application: UIApplication, didDiscardSceneSessions sceneSessions: Set<UISceneSession>) {
    }
}
```

ç„¶åç›´æ¥è¿è¡Œå°± OK.

-----
THE END.


